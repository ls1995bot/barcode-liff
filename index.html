<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Scan Barcode</title>
  <script src="https://cdn.jsdelivr.net/npm/@zxing/library@0.19.1/umd/index.min.js"></script>
</head>
<body>
  <h2>üì∑ ‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</h2>
  <video id="video" width="300" height="200" style="border:1px solid black"></video>
  <script>
    const codeReader = new ZXing.BrowserBarcodeReader();
    const videoElement = document.getElementById('video');

    codeReader.decodeFromVideoDevice(null, 'video', (result, err) => {
      if (result) {
        console.log('Found code: ', result.text);
        // ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ LINE chat ‡∏ú‡πà‡∏≤‡∏ô LIFF sendMessage
        if (window.liff) {
          liff.init({ liffId: "YOUR_LIFF_ID" }).then(() => {
            liff.sendMessages([{ type: 'text', text: result.text }])
                .then(() => liff.closeWindow())
                .catch(err => console.error(err));
          });
        } else {
          alert("Scanned: " + result.text);
        }
      }
      if (err && !(err instanceof ZXing.NotFoundException)) {
        console.error(err);
      }
    });
  </script>
</body>
</html>
